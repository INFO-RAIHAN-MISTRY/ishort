{% extends 'Dashboard/base.html' %}

{% block title %}
    Manage Urls
{% endblock title %}
    

{% block content %}
    <main class="content">
        <div class="container-fluid p-0">

            {% comment %} <h1 class="h3 mb-3">Create Short Url</h1> {% endcomment %}

            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Generate Short Urls</h5>
                        </div>
                            
                        <div class="card-body text-center">
                            <div class="col-lg-8 col-md-6 text-center">
                                {% if messages %}
                                
                                    {% for message in messages %}
                                        <div class="alert {{message.tags}}" role="alert">
                                            <strong>{{message}}</strong>
                                        </div>
                                    {% endfor %}
                                        
                                {% endif %}
                            </div>
                            <form action="" method="POST">
                            {% csrf_token %}
                                <div class="row">
                                    <div class="col-lg-4 col-md-6 mb-3">
                                        <div class="">
                                          <label for="longurl" class="form-label"><b>Long url</b></label>
                                          <textarea class="form-control" name="long_url" id="longurl" row="3" placeholder="Paste your long url here ..."></textarea>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-6">
                                        <div class="">
                                          <label for="urltitle" class="form-label"><b>Url title</b></label>
                                          <textarea class="form-control" name="url_title" id="urltitle" row="3" placeholder="Url title or desc here ..."></textarea>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-6">
                                        <div class="d-grid gap-2">
                                          <button type="submit" class="btn btn-primary btn-lg" style="margin-top:35px">Generate</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            {% comment %} <h1 class="h3 mb-3">Urls</h1> {% endcomment %}

            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">All Short Urls</h5>
                        </div>
                        <div class="card-body" style="overflow-x: scroll;">
                            <table class="table">
                                <thead>
                                  <tr>
                                    <th scope="col">Url Title</th>
                                    <th scope="col">Short Url</th>
                                    <th scope="col">Long Url</th>
                                    <th scope="col">Url Created At</th>
                                  </tr>
                                </thead>
                                <tbody>
                                    
                                    {% if urls %}
                                        
                                        {% for url in urls %}
                                        <tr>
                                            <th scope="row">{{url.url_title}}</th>
                                            <td>{{url.short_url}}</td>
                                            <td>{{url.long_url|truncatechars:50}}</td>
                                            <td>{{url.url_created_at}}</td>
                                          </tr>
                                        {% endfor %}
                                            
                                    {% endif %}
                                        
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>
{% endblock content %}
    